{
    "$schema": "../../../../docs/schema/idoc_v1.json",
    "title": "Feature: Advanced Charts",
    "dataLoaders": [
        {
            "dataSourceName": "cars",
            "type": "url",
            "url": "https://vega.github.io/vega-datasets/data/cars.json"
        },
        {
            "dataSourceName": "stocks",
            "type": "url", 
            "url": "https://vega.github.io/vega-datasets/data/stocks.csv"
        },
        {
            "dataSourceName": "weather",
            "type": "url",
            "url": "https://vega.github.io/vega-datasets/data/seattle-weather.csv"
        }
    ],
    "groups": [
        {
            "groupId": "main",
            "elements": [
                "## Advanced Charts Showcase\n\nThis page demonstrates the powerful capabilities of Chartifact using proven examples from the Vega and Vega-Lite galleries. These examples showcase:\n\n- **Interactive selections and brushing**\n- **Multi-dimensional data exploration**\n- **Time series visualizations**\n- **Statistical transformations**\n- **Professional styling and layouts**\n\nAll examples use well-tested specifications from the official Vega examples gallery.\n\n---",
                "### 1. Interactive Car Data Scatter Plot\n\nThis classic example shows the relationship between horsepower and miles per gallon. Click and drag to select regions and see interactive highlighting.",
                {
                    "type": "chart",
                    "chartKey": "carsScatter"
                },
                "---",
                "### 2. Stock Prices Line Chart\n\nA multi-series line chart showing stock prices over time with clean styling and hover interactions.",
                {
                    "type": "chart",
                    "chartKey": "stockPrices"
                },
                "---",
                "### 3. Weather Data Heatmap\n\nA calendar heatmap showing daily temperature data with custom color encoding and excellent readability.",
                {
                    "type": "chart",
                    "chartKey": "weatherHeatmap"
                },
                "---",
                "### 4. Interactive Car Dashboard\n\nA more complex example using Vega (not Vega-Lite) with custom interactions, filters, and linked visualizations.",
                {
                    "type": "chart",
                    "chartKey": "carDashboard"
                }
            ]
        }
    ],
    "resources": {
        "charts": {
            "carsScatter": {
                "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                "description": "A scatterplot showing horsepower and miles per gallon for various cars.",
                "data": {"name": "cars"},
                "mark": "circle",
                "encoding": {
                    "x": {
                        "field": "Horsepower",
                        "type": "quantitative"
                    },
                    "y": {
                        "field": "Miles_per_Gallon",
                        "type": "quantitative"
                    },
                    "color": {
                        "field": "Origin",
                        "type": "nominal"
                    },
                    "tooltip": [
                        {"field": "Name", "type": "nominal"},
                        {"field": "Origin", "type": "nominal"},
                        {"field": "Horsepower", "type": "quantitative"},
                        {"field": "Miles_per_Gallon", "type": "quantitative"}
                    ]
                },
                "params": [
                    {
                        "name": "brush",
                        "select": {"type": "interval", "encodings": ["x", "y"]}
                    }
                ]
            },
            "stockPrices": {
                "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                "description": "Stock prices of 5 tech companies over time.",
                "data": {"name": "stocks"},
                "mark": {
                    "type": "line",
                    "point": true,
                    "tooltip": true
                },
                "encoding": {
                    "x": {
                        "field": "date",
                        "type": "temporal"
                    },
                    "y": {
                        "field": "price",
                        "type": "quantitative"
                    },
                    "color": {
                        "field": "symbol",
                        "type": "nominal"
                    }
                }
            },
            "weatherHeatmap": {
                "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                "data": {"name": "weather"},
                "title": "Daily Max Temperatures (C) in Seattle, WA",
                "config": {
                    "view": {
                        "strokeWidth": 0,
                        "step": 13
                    },
                    "axis": {
                        "domain": false
                    }
                },
                "mark": "rect",
                "encoding": {
                    "x": {
                        "field": "date",
                        "timeUnit": "date",
                        "type": "ordinal",
                        "title": "Day",
                        "axis": {
                            "labelAngle": 0,
                            "format": "%e"
                        }
                    },
                    "y": {
                        "field": "date",
                        "timeUnit": "month",
                        "type": "ordinal",
                        "title": "Month"
                    },
                    "color": {
                        "field": "temp_max",
                        "type": "quantitative",
                        "legend": {
                            "title": "Max Temp"
                        },
                        "scale": {
                            "scheme": "inferno"
                        }
                    },
                    "tooltip": [
                        {"field": "date", "type": "temporal", "format": "%B %d, %Y"},
                        {"field": "temp_max", "type": "quantitative"}
                    ]
                }
            },
            "carDashboard": {
                "$schema": "https://vega.github.io/schema/vega/v5.json",
                "description": "An interactive scatter plot of global health statistics by country and year.",
                "width": 800,
                "height": 500,
                "padding": 5,
                "autosize": "pad",
                "signals": [
                    {
                        "name": "clear",
                        "value": true,
                        "on": [
                            {
                                "events": "mouseup[!event.item]",
                                "update": "true",
                                "force": true
                            }
                        ]
                    },
                    {
                        "name": "shift",
                        "value": false,
                        "on": [
                            {
                                "events": "@legendSymbol:click, @legendLabel:click",
                                "update": "event.shiftKey",
                                "force": true
                            }
                        ]
                    },
                    {
                        "name": "clicked",
                        "value": null,
                        "on": [
                            {
                                "events": "@legendSymbol:click, @legendLabel:click",
                                "update": "{value: datum.value}",
                                "force": true
                            }
                        ]
                    }
                ],
                "data": [
                    {
                        "name": "cars",
                        "values": {"name": "cars"},
                        "transform": [
                            {
                                "type": "filter",
                                "expr": "datum.Horsepower != null && datum.Miles_per_Gallon != null && datum.Acceleration != null"
                            }
                        ]
                    },
                    {
                        "name": "selected",
                        "on": [
                            {"trigger": "clear", "remove": true},
                            {"trigger": "!shift", "remove": true},
                            {"trigger": "!shift && clicked", "insert": "clicked"},
                            {"trigger": "shift && clicked", "toggle": "clicked"}
                        ]
                    }
                ],
                "scales": [
                    {
                        "name": "x",
                        "type": "linear",
                        "round": true,
                        "nice": true,
                        "zero": false,
                        "domain": {"data": "cars", "field": "Horsepower"},
                        "range": "width"
                    },
                    {
                        "name": "y",
                        "type": "linear",
                        "round": true,
                        "nice": true,
                        "zero": false,
                        "domain": {"data": "cars", "field": "Miles_per_Gallon"},
                        "range": "height"
                    },
                    {
                        "name": "size",
                        "type": "linear",
                        "round": true,
                        "nice": false,
                        "zero": true,
                        "domain": {"data": "cars", "field": "Acceleration"},
                        "range": [4, 361]
                    },
                    {
                        "name": "color",
                        "type": "ordinal",
                        "domain": {"data": "cars", "field": "Origin"},
                        "range": "category"
                    }
                ],
                "axes": [
                    {
                        "scale": "x",
                        "grid": true,
                        "domain": false,
                        "orient": "bottom",
                        "tickCount": 5,
                        "title": "Horsepower"
                    },
                    {
                        "scale": "y",
                        "grid": true,
                        "domain": false,
                        "orient": "left",
                        "titlePadding": 5,
                        "title": "Miles per Gallon"
                    }
                ],
                "legends": [
                    {
                        "stroke": "color",
                        "title": "Origin",
                        "encode": {
                            "symbols": {
                                "name": "legendSymbol",
                                "interactive": true,
                                "update": {
                                    "fill": {"value": "transparent"},
                                    "strokeWidth": {"value": 2},
                                    "opacity": [
                                        {"test": "!length(data('selected')) || indata('selected', 'value', datum.value)", "value": 0.7},
                                        {"value": 0.15}
                                    ],
                                    "size": {"value": 64}
                                }
                            },
                            "labels": {
                                "name": "legendLabel",
                                "interactive": true,
                                "update": {
                                    "opacity": [
                                        {"test": "!length(data('selected')) || indata('selected', 'value', datum.value)", "value": 1},
                                        {"value": 0.25}
                                    ]
                                }
                            }
                        }
                    },
                    {
                        "size": "size",
                        "title": "Acceleration",
                        "format": "s",
                        "symbolStrokeColor": "#4682b4",
                        "symbolStrokeWidth": 2,
                        "symbolOpacity": 0.5,
                        "symbolType": "circle"
                    }
                ],
                "marks": [
                    {
                        "name": "marks",
                        "type": "symbol",
                        "from": {"data": "cars"},
                        "encode": {
                            "update": {
                                "x": {"scale": "x", "field": "Horsepower"},
                                "y": {"scale": "y", "field": "Miles_per_Gallon"},
                                "size": {"scale": "size", "field": "Acceleration"},
                                "stroke": {"scale": "color", "field": "Origin"},
                                "strokeWidth": {"value": 2},
                                "opacity": [
                                    {"test": "!length(data('selected')) || indata('selected', 'value', datum.Origin)", "value": 0.7},
                                    {"value": 0.15}
                                ],
                                "fill": {"value": "transparent"}
                            }
                        }
                    }
                ]
            }
        }
    }
}